<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora Antecipa√ß√£o Clinipay</title>
  <style>
    :root {
      --bg: #f9fafb;
      --card: #ffffff;
      --border: #e5e7eb;
      --text: #111827;
      --muted: #6b7280;
      --orange: #f97316;
      --orange-dark: #ea580c;
      --green: #16a34a;
      --green-dark: #166534;
      --shadow: 0 10px 25px rgba(15, 23, 42, 0.08);
      --radius-xl: 16px;
      --radius-2xl: 20px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: #ffffff;
      color: var(--text);
    }

    .page {
      min-height: 100vh;
      background: radial-gradient(circle at top left, #fff7ed, #f9fafb 45%, #eef2ff);
      padding: 24px 16px;
    }

    .container {
      max-width: 1120px;
      margin: 0 auto;
      background: transparent;
    }

    .text-center {
      text-align: center;
    }

    h1 {
      font-size: 28px;
      font-weight: 800;
      margin: 0 0 4px;
      color: #111827;
    }

    @media (min-width: 768px) {
      h1 {
        font-size: 34px;
      }
    }

    .subtitle-lg {
      font-size: 16px;
      color: #4b5563;
      margin: 0;
    }

    .subtitle-sm {
      font-size: 13px;
      color: #6b7280;
      margin-top: 4px;
    }

    .grid {
      display: grid;
      gap: 20px;
    }

    .lg-grid-4 {
      grid-template-columns: 1fr;
    }

    .lg-grid-2 {
      grid-template-columns: 1fr;
    }

    @media (min-width: 1024px) {
      .lg-grid-4 {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }

      .lg-grid-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-2xl);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      padding: 20px;
    }

    @media (min-width: 768px) {
      .card {
        padding: 24px;
      }
    }

    .card-soft {
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.06);
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 12px;
      color: #111827;
    }

    .card-title-sm {
      font-size: 14px;
      font-weight: 500;
      margin: 0 0 12px;
      color: #374151;
    }

    .field-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      margin-bottom: 6px;
    }

    .input-text {
      width: 100%;
      border-radius: 14px;
      border: 1px solid #d1d5db;
      padding: 12px 14px;
      font-size: 16px;
      font-weight: 600;
      color: #111827;
      outline: none;
      transition: border-color 0.15s, box-shadow 0.15s;
    }

    .input-text::placeholder {
      color: #9ca3af;
      font-weight: 400;
    }

    .input-text:focus {
      border-color: var(--orange);
      box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.25);
    }

    .slider-wrapper {
      position: relative;
    }

    .slider {
      width: 100%;
      height: 8px;
      appearance: none;
      -webkit-appearance: none;
      border-radius: 999px;
      outline: none;
      margin: 8px 0 0;
      background: #e5e7eb;
    }

    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #ffffff;
      border: 2px solid var(--orange);
      box-shadow: 0 1px 3px rgba(15, 23, 42, 0.25);
      cursor: pointer;
      margin-top: -5px;
    }

    .slider::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #ffffff;
      border: 2px solid var(--orange);
      box-shadow: 0 1px 3px rgba(15, 23, 42, 0.25);
      cursor: pointer;
    }

    .slider-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
      font-size: 12px;
      color: #6b7280;
    }

    .slider-label-center {
      font-weight: 600;
      color: var(--orange-dark);
      font-size: 13px;
    }

    .pill {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      background: #fef3c7;
      color: #92400e;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .pill-green {
      background: #dcfce7;
      color: #166534;
    }

    .pill-muted {
      background: #e5e7eb;
      color: #374151;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }

    @media (min-width: 768px) {
      .summary-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .summary-tag {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #6b7280;
      margin-bottom: 6px;
    }

    .summary-value-main {
      font-size: 20px;
      font-weight: 700;
      color: #111827;
    }

    .summary-value-sub {
      font-size: 12px;
      color: #6b7280;
    }

    .summary-net {
      background: #ecfdf3;
      border-radius: 12px;
      padding: 10px 12px;
      border: 1px solid #bbf7d0;
    }

    .summary-net-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #16a34a;
      font-weight: 600;
    }

    .summary-net-value {
      margin-top: 4px;
      font-size: 18px;
      font-weight: 700;
      color: #166534;
    }

    .economy-card {
      background: linear-gradient(135deg, #dcfce7, #bbf7d0);
      border-radius: var(--radius-2xl);
      padding: 18px 18px;
      border: 1px solid #86efac;
    }

    .economy-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #15803d;
    }

    .economy-value {
      margin-top: 4px;
      font-size: 22px;
      font-weight: 800;
      color: #052e16;
    }

    .economy-sub {
      margin-top: 2px;
      font-size: 12px;
      color: #166534;
    }

    .btn-primary {
      width: 100%;
      border: none;
      cursor: pointer;
      border-radius: 14px;
      padding: 11px 14px;
      font-size: 14px;
      font-weight: 500;
      color: #ffffff;
      background: linear-gradient(90deg, #f97316, #f59e0b);
      box-shadow: 0 6px 15px rgba(248, 113, 22, 0.35);
      transition: transform 0.1s, box-shadow 0.1s, filter 0.1s;
    }

    .btn-primary:hover {
      filter: brightness(1.05);
      box-shadow: 0 10px 20px rgba(248, 113, 22, 0.45);
      transform: translateY(-1px);
    }

    .btn-primary:active {
      transform: translateY(0);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.2);
    }

    .mt-8 {
      margin-top: 32px;
    }

    .mt-6 {
      margin-top: 24px;
    }

    .mt-4 {
      margin-top: 16px;
    }

    .mb-8 {
      margin-bottom: 32px;
    }

    .mb-6 {
      margin-bottom: 24px;
    }

    .mb-4 {
      margin-bottom: 16px;
    }

    .mb-3 {
      margin-bottom: 12px;
    }

    .table-wrapper {
      border-radius: 18px;
      border: 1px solid #e5e7eb;
      overflow: hidden;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.06);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    thead {
      background: linear-gradient(90deg, #f9fafb, #e5e7eb);
    }

    th, td {
      padding: 10px 12px;
    }

    th {
      text-align: left;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #4b5563;
      font-weight: 600;
      border-bottom: 1px solid #e5e7eb;
    }

    td {
      border-bottom: 1px solid #f3f4f6;
      color: #111827;
    }

    tbody tr:nth-child(odd) {
      background: #ffffff;
    }

    tbody tr:nth-child(even) {
      background: #f9fafb;
    }

    .row-hover:hover {
      background: #f3f4f6;
    }

    .row-selected {
      background: #fff7ed !important;
      border-left: 4px solid #f97316;
    }

    .row-selected td:first-child {
      font-weight: 600;
      color: #9a3412;
    }

    .text-right {
      text-align: right;
    }

    .text-green {
      color: #15803d;
      font-weight: 600;
    }

    .text-red {
      color: #b91c1c;
      font-weight: 600;
    }

    .badge-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      margin-right: 8px;
      background: #f97316;
      display: inline-block;
    }

    .note-list {
      font-size: 13px;
      color: #4b5563;
    }

    .note-list p {
      margin: 4px 0;
    }

    .note-list strong {
      font-weight: 600;
      color: #111827;
    }

    .hidden {
      display: none;
    }

    @media (min-width: 1024px) {
      .lg-span-2 {
        grid-column: span 2 / span 2;
      }
    }
  </style>
</head>
<body>
<div class="page">
  <div class="container">
    <div class="text-center mb-8">
      <h1>Calculadora Antecipa√ß√£o Clinipay</h1>
      <p class="subtitle-lg">Simula√ß√£o completa de venda + Antecipa√ß√£o (D+1)</p>
      <p class="subtitle-sm">Compare planos Standard vs Premium e otimize seus custos</p>
    </div>

    <!-- Top grid: par√¢metros + economia/toggle -->
    <div class="grid lg-grid-4 mb-8">
      <!-- Par√¢metros -->
      <div class="card card-soft lg-span-2">
        <h3 class="card-title">Par√¢metros da Simula√ß√£o</h3>

        <div class="mb-6">
          <label for="valorVenda" class="field-label">Valor da venda (R$)</label>
          <input
            id="valorVenda"
            type="number"
            min="0"
            class="input-text"
            placeholder="Ex: 20000"
          />
        </div>

        <div>
          <label class="field-label">Quantidade de parcelas</label>
          <div class="slider-wrapper">
            <input
              id="parcelasRange"
              type="range"
              min="1"
              max="21"
              value="10"
              class="slider"
            />
            <div class="slider-labels">
              <span>1x</span>
              <span id="parcelasLabel" class="slider-label-center">10 parcelas</span>
              <span>21x</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Economia + bot√£o tabela -->
      <div class="grid" style="grid-template-columns: 1fr; gap: 16px;">
        <div class="card card-soft">
          <h3 class="card-title-sm">Economia Premium vs Standard</h3>
          <div class="economy-card">
            <div class="economy-label">Voc√™ economiza</div>
            <div id="economiaPremium" class="economy-value">R$ 0,00</div>
            <div class="economy-sub">com o plano Premium</div>
          </div>
        </div>

        <div class="card card-soft">
          <button id="toggleTabelaBtn" class="btn-primary">
            Ver tabela completa
          </button>
        </div>
      </div>
    </div>

    <!-- Resumo Standard vs Premium -->
    <div class="grid lg-grid-2 mb-8">
      <div class="card card-soft">
        <h3 class="card-title">Standard</h3>
        <p id="standardDescricao" class="subtitle-sm" style="margin-bottom: 12px;">
          Plano: ‚Äî 
        </p>
        <div class="summary-grid">
          <div style="grid-column: 1 / -1; background:#f9fafb; border-radius: 12px; padding: 10px 12px;">
            <div class="summary-tag">Taxa de Antecipa√ß√£o</div>
            <div id="standardTaxaTotal" class="summary-value-main">R$ 0,00</div>
            <div id="standardTaxaPercent" class="summary-value-sub">(0,00%)</div>
          </div>
          <div class="summary-net">
            <div class="summary-net-label">L√≠quido</div>
            <div id="standardLiquido" class="summary-net-value">R$ 0,00</div>
          </div>
        </div>
      </div>

      <div class="card card-soft">
        <h3 class="card-title">Premium</h3>
        <p id="premiumDescricao" class="subtitle-sm" style="margin-bottom: 12px;">
          Plano: ‚Äî 
        </p>
        <div class="summary-grid">
          <div style="grid-column: 1 / -1; background:#f9fafb; border-radius: 12px; padding: 10px 12px;">
            <div class="summary-tag">Taxa de Antecipa√ß√£o</div>
            <div id="premiumTaxaTotal" class="summary-value-main">R$ 0,00</div>
            <div id="premiumTaxaPercent" class="summary-value-sub">(0,00%)</div>
          </div>
          <div class="summary-net">
            <div class="summary-net-label">L√≠quido</div>
            <div id="premiumLiquido" class="summary-net-value">R$ 0,00</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabelas completas -->
    <div id="tabelasBlock" class="card card-soft hidden">
      <h3 class="card-title" style="text-align:center; margin-bottom: 24px;">
        Tabelas Completas de Taxas
      </h3>
      <div class="grid lg-grid-2" style="gap: 24px;">
        <div>
          <h4 class="card-title-sm" style="display:flex; align-items:center;">
            <span class="badge-dot"></span>
            Standard ‚Äî tabela completa
          </h4>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Parcelas</th>
                  <th>MDR</th>
                  <th>Antecip.</th>
                  <th class="text-right">Taxa Total</th>
                  <th class="text-right">L√≠quido</th>
                </tr>
              </thead>
              <tbody id="tabelaStandardBody"></tbody>
            </table>
          </div>
        </div>

        <div>
          <h4 class="card-title-sm" style="display:flex; align-items:center;">
            <span class="badge-dot"></span>
            Premium ‚Äî tabela completa
          </h4>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Parcelas</th>
                  <th>MDR</th>
                  <th>Antecip.</th>
                  <th class="text-right">Taxa Total</th>
                  <th class="text-right">L√≠quido</th>
                </tr>
              </thead>
              <tbody id="tabelaPremiumBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Observa√ß√µes -->
    <div class="card card-soft mt-8">
      <h4 class="card-title-sm">üìã Observa√ß√µes importantes</h4>
      <div class="note-list">
        <p>‚Ä¢ <strong>C√°lculo:</strong> MDR aplicado sobre o valor bruto + antecipa√ß√£o aplicada sobre o valor ap√≥s desconto do MDR</p>
        <p>‚Ä¢ <strong>Taxas:</strong> Percentuais totais por quantidade de parcelas (sem capitaliza√ß√£o mensal)</p>
        <p>‚Ä¢ <strong>Simula√ß√£o:</strong> Valores aproximados, consulte a pol√≠tica vigente para informa√ß√µes definitivas</p>
        <p>‚Ä¢ <strong>Antecipa√ß√£o:</strong> Modalidade D+1 (recebimento no pr√≥ximo dia √∫til)</p>
      </div>
    </div>
  </div>
</div>

<script>
(function() {
  // ======= Tabelas de Taxas (mesmas do React) =======
  const taxasStandard = [
    { parcelas: 1,  label: "√Ä vista", mdr: 0.0239, ant: 0.0199 },
    { parcelas: 2,  label: "2x",    mdr: 0.0299, ant: 0.0296 },
    { parcelas: 3,  label: "3x",    mdr: 0.0299, ant: 0.0394 },
    { parcelas: 4,  label: "4x",    mdr: 0.0299, ant: 0.0493 },
    { parcelas: 5,  label: "5x",    mdr: 0.0299, ant: 0.0591 },
    { parcelas: 6,  label: "6x",    mdr: 0.0299, ant: 0.0690 },
    { parcelas: 7,  label: "7x",    mdr: 0.0349, ant: 0.0788 },
    { parcelas: 8,  label: "8x",    mdr: 0.0349, ant: 0.0887 },
    { parcelas: 9,  label: "9x",    mdr: 0.0349, ant: 0.0986 },
    { parcelas: 10, label: "10x",   mdr: 0.0349, ant: 0.1084 },
    { parcelas: 11, label: "11x",   mdr: 0.0349, ant: 0.1183 },
    { parcelas: 12, label: "12x",   mdr: 0.0349, ant: 0.1281 },
    { parcelas: 13, label: "13x",   mdr: 0.0399, ant: 0.1380 },
    { parcelas: 14, label: "14x",   mdr: 0.0399, ant: 0.1478 },
    { parcelas: 15, label: "15x",   mdr: 0.0399, ant: 0.1577 },
    { parcelas: 16, label: "16x",   mdr: 0.0399, ant: 0.1675 },
    { parcelas: 17, label: "17x",   mdr: 0.0399, ant: 0.1774 },
    { parcelas: 18, label: "18x",   mdr: 0.0399, ant: 0.1873 },
    { parcelas: 19, label: "19x",   mdr: 0.0399, ant: 0.1971 },
    { parcelas: 20, label: "20x",   mdr: 0.0399, ant: 0.2070 },
    { parcelas: 21, label: "21x",   mdr: 0.0399, ant: 0.2168 },
  ];

  const taxasPremium = [
    { parcelas: 1,  label: "√Ä vista", mdr: 0.0199, ant: 0.0169 },
    { parcelas: 2,  label: "2x",    mdr: 0.0239, ant: 0.0251 },
    { parcelas: 3,  label: "3x",    mdr: 0.0239, ant: 0.0335 },
    { parcelas: 4,  label: "4x",    mdr: 0.0239, ant: 0.0419 },
    { parcelas: 5,  label: "5x",    mdr: 0.0239, ant: 0.0503 },
    { parcelas: 6,  label: "6x",    mdr: 0.0239, ant: 0.0587 },
    { parcelas: 7,  label: "7x",    mdr: 0.0299, ant: 0.0671 },
    { parcelas: 8,  label: "8x",    mdr: 0.0299, ant: 0.0754 },
    { parcelas: 9,  label: "9x",    mdr: 0.0299, ant: 0.0838 },
    { parcelas: 10, label: "10x",   mdr: 0.0299, ant: 0.0922 },
    { parcelas: 11, label: "11x",   mdr: 0.0299, ant: 0.1006 },
    { parcelas: 12, label: "12x",   mdr: 0.0299, ant: 0.1090 },
    { parcelas: 13, label: "13x",   mdr: 0.0349, ant: 0.1173 },
    { parcelas: 14, label: "14x",   mdr: 0.0349, ant: 0.1257 },
    { parcelas: 15, label: "15x",   mdr: 0.0349, ant: 0.1341 },
    { parcelas: 16, label: "16x",   mdr: 0.0349, ant: 0.1425 },
    { parcelas: 17, label: "17x",   mdr: 0.0349, ant: 0.1509 },
    { parcelas: 18, label: "18x",   mdr: 0.0349, ant: 0.1593 },
    { parcelas: 19, label: "19x",   mdr: 0.0349, ant: 0.1676 },
    { parcelas: 20, label: "20x",   mdr: 0.0349, ant: 0.1760 },
    { parcelas: 21, label: "21x",   mdr: 0.0349, ant: 0.1844 },
  ];

  // ======= Estado =======
  const state = {
    valorVenda: 20000,
    parcelas: 10,
    mostrarTabela: false,
  };

  const currency = new Intl.NumberFormat("pt-BR", {
    style: "currency",
    currency: "BRL",
    maximumFractionDigits: 2,
  });

  // ======= DOM refs =======
  const inputValor = document.getElementById("valorVenda");
  const sliderParcelas = document.getElementById("parcelasRange");
  const labelParcelas = document.getElementById("parcelasLabel");
  const economiaPremiumEl = document.getElementById("economiaPremium");
  const toggleTabelaBtn = document.getElementById("toggleTabelaBtn");
  const tabelasBlock = document.getElementById("tabelasBlock");
  const tabelaStandardBody = document.getElementById("tabelaStandardBody");
  const tabelaPremiumBody = document.getElementById("tabelaPremiumBody");

  const standardDescricao = document.getElementById("standardDescricao");
  const premiumDescricao = document.getElementById("premiumDescricao");
  const standardTaxaTotal = document.getElementById("standardTaxaTotal");
  const standardTaxaPercent = document.getElementById("standardTaxaPercent");
  const standardLiquido = document.getElementById("standardLiquido");
  const premiumTaxaTotal = document.getElementById("premiumTaxaTotal");
  const premiumTaxaPercent = document.getElementById("premiumTaxaPercent");
  const premiumLiquido = document.getElementById("premiumLiquido");

  // Inicializar valor da venda
  inputValor.value = state.valorVenda;

  function calcular(planData) {
    const idx = Math.min(Math.max(state.parcelas, 1), 21) - 1;
    const item = planData[idx];
    const mdrValor = state.valorVenda * item.mdr;
    const baseAnt = state.valorVenda - mdrValor;
    const antValor = baseAnt * item.ant;
    const taxaTotal = mdrValor + antValor;
    const liquido = state.valorVenda - taxaTotal;

    return {
      item,
      taxaTotal,
      liquido,
      mdrValor,
      antValor,
      efetivaSobreBruto: state.valorVenda > 0 ? taxaTotal / state.valorVenda : 0,
    };
  }

  // Slider background din√¢mico
  function updateSliderBackground() {
    const pct = ((state.parcelas - 1) / 20) * 100;
    sliderParcelas.style.background = 
      `linear-gradient(to right, #F97316 0%, #F97316 ${pct}%, #E5E7EB ${pct}%, #E5E7EB 100%)`;
  }

  // Render principal
  function render() {
    // Atualizar labels b√°sicas
    labelParcelas.textContent = state.parcelas + " parcela" + (state.parcelas > 1 ? "s" : "");
    updateSliderBackground();

    const resultadoStandard = calcular(taxasStandard);
    const resultadoPremium = calcular(taxasPremium);
    const economia = Math.max(0, resultadoStandard.taxaTotal - resultadoPremium.taxaTotal);

    // Standard
    standardDescricao.textContent =
      "Plano: " + resultadoStandard.item.label + " (" + state.parcelas + " parcela" + (state.parcelas > 1 ? "s" : "") + ")";
    standardTaxaTotal.textContent = currency.format(resultadoStandard.taxaTotal);
    standardTaxaPercent.textContent = "(" + (resultadoStandard.efetivaSobreBruto * 100).toFixed(2) + "%)";
    standardLiquido.textContent = currency.format(resultadoStandard.liquido);

    // Premium
    premiumDescricao.textContent =
      "Plano: " + resultadoPremium.item.label + " (" + state.parcelas + " parcela" + (state.parcelas > 1 ? "s" : "") + ")";
    premiumTaxaTotal.textContent = currency.format(resultadoPremium.taxaTotal);
    premiumTaxaPercent.textContent = "(" + (resultadoPremium.efetivaSobreBruto * 100).toFixed(2) + "%)";
    premiumLiquido.textContent = currency.format(resultadoPremium.liquido);

    // Economia
    economiaPremiumEl.textContent = currency.format(economia);

    // Tabelas completas
    if (state.mostrarTabela) {
      tabelasBlock.classList.remove("hidden");
      renderTabela(tabelaStandardBody, taxasStandard);
      renderTabela(tabelaPremiumBody, taxasPremium);
    } else {
      tabelasBlock.classList.add("hidden");
    }

    toggleTabelaBtn.textContent = state.mostrarTabela
      ? "Ocultar tabela completa"
      : "Ver tabela completa";
  }

  function renderTabela(tbody, planData) {
    tbody.innerHTML = "";
    planData.forEach((it, index) => {
      const mdrValor = state.valorVenda * it.mdr;
      const antValor = (state.valorVenda - mdrValor) * it.ant;
      const taxaTotal = mdrValor + antValor;
      const liquido = state.valorVenda - taxaTotal;
      const isSelected = it.parcelas === state.parcelas;

      const tr = document.createElement("tr");
      tr.className = (isSelected ? "row-selected " : "") + "row-hover";

      const tdLabel = document.createElement("td");
      tdLabel.textContent = it.label;
      tr.appendChild(tdLabel);

      const tdMdr = document.createElement("td");
      tdMdr.textContent = (it.mdr * 100).toFixed(2) + "%";
      tdMdr.style.fontFamily = "ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace";
      tdMdr.style.fontSize = "12px";
      tr.appendChild(tdMdr);

      const tdAnt = document.createElement("td");
      tdAnt.textContent = (it.ant * 100).toFixed(2) + "%";
      tdAnt.style.fontFamily = tdMdr.style.fontFamily;
      tdAnt.style.fontSize = "12px";
      tr.appendChild(tdAnt);

      const tdTaxa = document.createElement("td");
      tdTaxa.textContent = currency.format(taxaTotal);
      tdTaxa.className = "text-right text-red";
      tr.appendChild(tdTaxa);

      const tdLiq = document.createElement("td");
      tdLiq.textContent = currency.format(liquido);
      tdLiq.className = "text-right text-green";
      tr.appendChild(tdLiq);

      tbody.appendChild(tr);
    });
  }

  // Eventos
  inputValor.addEventListener("input", function() {
    const v = parseFloat(inputValor.value.replace(",", "."));
    state.valorVenda = isNaN(v) || v < 0 ? 0 : v;
    render();
  });

  sliderParcelas.addEventListener("input", function() {
    const v = parseInt(sliderParcelas.value, 10);
    state.parcelas = Math.min(Math.max(v, 1), 21);
    render();
  });

  toggleTabelaBtn.addEventListener("click", function() {
    state.mostrarTabela = !state.mostrarTabela;
    render();
  });

  // Init
  updateSliderBackground();
  render();
})();
</script>
</body>
</html>

